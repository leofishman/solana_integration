{# templates/x402-solana-payment-required.html.twig #}
{{ attach_library('x402_solana_content/wallet_integration') }}

<div class="solana-payment-required" data-node-id="{{ node_id }}">
  <div class="payment-header">
    <h1>Payment Required</h1>
    <p>Access to "{{ title }}" requires payment.</p>
  </div>
  
  <div class="payment-options">
    <h2>Available Payment Options</h2>
    {% for field in solana_fields %}
    <div class="payment-option" data-field="{{ field.field_name }}" data-delta="{{ field.delta }}">
      <h3>{{ field.label }}</h3>
      <div class="payment-details">
        <div class="amount">
          <strong>Amount:</strong> {{ field.amount }} {{ field.currency }}
        </div>
        {% if field.address %}
        <div class="wallet">
          <strong>Wallet Address:</strong> 
          <code class="wallet-address">{{ field.address }}</code>
          <button class="copy-address" data-address="{{ field.address }}">Copy</button>
        </div>
        {% endif %}
      </div>
    </div>
    {% endfor %}
  </div>
  
  <div class="wallet-connection">
    <h3>Connect Your Wallet</h3>
    <div class="wallet-buttons">
      <button id="connect-phantom" class="wallet-button phantom">Phantom</button>
      <button id="connect-solflare" class="wallet-button solflare">Solflare</button>
      <button id="connect-backpack" class="wallet-button backpack">Backpack</button>
    </div>
    <div id="wallet-status" class="wallet-status"></div>
  </div>
  
  <div class="payment-actions">
    <button id="make-payment" class="make-payment" disabled>Make Payment</button>
    <div id="payment-verification" class="payment-verification" style="display: none;">
      <h4>Verifying Payment...</h4>
      <div class="verification-progress">
        <div class="progress-bar"></div>
      </div>
      <p>Please wait while we verify your transaction on the Solana blockchain.</p>
    </div>
  </div>
  
  <div class="alternative-actions">
    <a href="{{ url('<front>') }}">Return to homepage</a>
  </div>
</div>
